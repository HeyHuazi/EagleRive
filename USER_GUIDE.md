# Eagle Rive 插件 - 用户使用手册

欢迎使用 Eagle Rive 插件！本手册将帮助你快速掌握所有功能。

## 📚 目录

- [快速开始](#快速开始)
- [界面说明](#界面说明)
- [播放控制](#播放控制)
- [缩放与导航](#缩放与导航)
- [快捷键列表](#快捷键列表)
- [性能监控](#性能监控)
- [常见问题](#常见问题)
- [故障排除](#故障排除)

## 🚀 快速开始

### 第一次使用

1. **安装插件**
   - 打开 Eagle 应用
   - 进入 **设置** → **插件** → **安装插件**
   - 选择本插件目录
   - 点击安装

2. **导入 Rive 文件**
   - 将 `.riv` 或 `.rev` 文件拖入 Eagle
   - 缩略图会自动生成（显示 Rive 占位图标或动画第一帧）

3. **预览动画**
   - 在 Eagle 中点击 Rive 文件
   - 右侧预览面板会显示动画
   - 动画会自动播放（状态机模式）

## 🎨 界面说明

### 主界面布局

```
┌─────────────────────────────────────────┐
│                      [FPS: 60]          │  ← FPS 监控（右上角）
│                                         │
│           动画画布区域                  │
│        （支持缩放、平移）               │
│                                         │
│  ┌───────────────────────────────────┐  │
│  │ 文件信息                           │  │
│  ├───────────────────────────────────┤  │
│  │ 状态机 | 时间线                   │  │  ← Tab 切换
│  ├───────────────────────────────────┤  │
│  │ 控制面板                           │  │
│  └───────────────────────────────────┘  │
└─────────────────────────────────────────┘
│ [背景]  [缩放控制]          [?]        │  ← 控制栏
└─────────────────────────────────────────┘
```

### 各区域功能

#### 1. 动画画布区域
- 显示 Rive 动画内容
- 支持缩放（Ctrl + 滚轮）
- 支持平移（Space + 拖动）

#### 2. FPS 监控（右上角）
- 实时显示帧率
- 🟢 绿色：≥55 FPS（流畅）
- 🟠 橙色：30-55 FPS（正常）
- 🔴 红色：<30 FPS（卡顿）

#### 3. 文件信息区
- 文件名
- 画板尺寸（如：500x500）
- 动画数量
- 状态机数量
- 画板选择器（多画板文件）

#### 4. Tab 切换
- **状态机**：控制状态机交互
- **时间线**：播放动画列表

#### 5. 控制面板
- **状态机模式**：Inputs 控制、Data Binding
- **时间线模式**：动画列表、播放控制

#### 6. 底部控制栏
- **背景切换**（左侧）：白色 / 黑色 / 透明棋盘格
- **缩放控制**（中间）：放大、缩小、重置
- **帮助按钮**（右侧）：显示快捷键面板

## ▶️ 播放控制

### 时间线模式

在「时间线」Tab 下：

1. **选择动画**
   - 点击动画列表中的动画名称
   - 动画会自动播放

2. **播放控制**
   - **播放/暂停**：点击控制栏左侧按钮
   - **重新播放**：点击重播按钮（会重置到第一帧）
   - **速度控制**：拖动滑块调节速度（0.1x - 3.0x）

3. **速度说明**
   - `0.1x` - 极慢（适合观察细节）
   - `0.5x` - 慢速
   - `1.0x` - 正常速度
   - `2.0x` - 快速
   - `3.0x` - 极快

### 状态机模式

在「状态机」Tab 下：

1. **选择状态机**
   - 如果有多个状态机，使用下拉菜单选择

2. **Inputs 控制**
   - **触发器（Trigger）**：点击按钮触发
   - **布尔值（Boolean）**：点击开关切换
   - **数值（Number）**：输入数字或使用箭头调整

3. **Data Binding**
   - 选择 ViewModel
   - 编辑属性（String、Number、Boolean、Color、Enum）
   - 修改会实时反映到动画

### Tab 切换逻辑

- 切换到「时间线」→ 自动播放动画，暂停状态机
- 切换到「状态机」→ 暂停动画，激活状态机交互

## 🔍 缩放与导航

### 缩放方法

#### 方法 1：使用按钮
- **放大**：点击 `+` 按钮
- **缩小**：点击 `-` 按钮
- **重置**：点击 `⟲` 按钮（恢复默认 100%）

#### 方法 2：使用快捷键
- `Ctrl + 0` - 重置缩放
- `Ctrl + +` - 放大
- `Ctrl + -` - 缩小

#### 方法 3：使用鼠标
- 按住 `Ctrl` + 滚轮向上 - 放大
- 按住 `Ctrl` + 滚轮向下 - 缩小

### 平移画布

1. 按住 **Space 键**
2. 按住鼠标左键拖动
3. 释放 Space 键结束平移

## ⌨️ 快捷键列表

### 缩放控制

| 快捷键 | 功能 |
|--------|------|
| `Ctrl + 0` | 重置缩放到 100% |
| `Ctrl + +` | 放大 |
| `Ctrl + -` | 缩小 |
| `Ctrl + 滚轮` | 缩放（向上放大，向下缩小） |

### 画布导航

| 快捷键 | 功能 |
|--------|------|
| `Space + 拖动` | 平移画布 |

### 如何查看快捷键

点击底部控制栏右侧的 **?** 按钮，会弹出快捷键帮助面板。

## 📊 性能监控

### FPS 指示器

位于画布右上角，实时显示帧率：

| FPS 范围 | 颜色 | 说明 |
|----------|------|------|
| ≥55 | 🟢 绿色 | 流畅 |
| 30-55 | 🟠 橙色 | 正常 |
| <30 | 🔴 红色 | 卡顿 |

### 性能优化建议

如果 FPS 显示红色或卡顿：

1. **降低播放速度** - 使用速度滑块降到 0.5x 或更低
2. **关闭其他应用** - 释放系统资源
3. **检查动画复杂度** - 复杂动画（大量粒子、模糊）需要更高性能
4. **更新浏览器** - 使用最新版本

## 🎨 背景切换

控制栏左侧提供三种背景选项：

- **白色** - 纯白背景，适合明亮设计
- **黑色** - 纯黑背景，适合暗色设计
- **透明棋盘格** - 棋盘格图案，适合透明动画

点击色板即可切换背景。

## ❓ 常见问题

### Q1: 如何重新播放动画？

**A**: 有两种方法：
1. 点击重播按钮（🔄 图标）
2. 切换到其他动画，再切换回来

### Q2: 速度控制会影响什么？

**A**: 速度控制只影响当前播放的动画，不影响：
- 状态机交互
- Data Binding 属性
- 缩放和平移

### Q3: 多画板文件如何切换？

**A**: 在文件信息区会显示画板选择器，点击下拉菜单选择画板。

### Q4: `.rev` 文件可以预览吗？

**A**: `.rev` 是 Rive 编辑器备份格式，运行时无法加载。插件会显示提示信息，引导你在 Rive 编辑器中打开。

### Q5: 为什么有些动画没有声音？

**A**: Rive 动画是纯视觉效果，不支持音频。如果需要音效，需要在 Eagle 中或其他应用中添加。

### Q6: FPS 为什么是红色？

**A**:
- FPS < 30 会显示红色
- 可能原因：动画过于复杂、设备性能不足
- 解决方法：降低播放速度、关闭其他应用

### Q7: 如何保存动画设置？

**A**: 插件不会记住设置（速度、缩放等），每次打开文件会重置为默认值。

## 🔧 故障排除

### 问题 1：预览一直显示 loading

**可能原因**：
- Rive 运行时文件缺失
- 文件损坏
- 路径错误

**解决方法**：
1. 确认 `viewer/lib/rive.webgl2.js` 文件存在（294KB）
2. 刷新 Eagle 预览面板
3. 尝试用 Rive 编辑器打开文件，确认文件未损坏
4. 检查浏览器控制台是否有错误信息

### 问题 2：动画不播放

**可能原因**：
- 处于状态机模式，需要手动交互
- 动画列表未选择

**解决方法**：
1. 切换到「时间线」Tab
2. 点击动画列表中的动画
3. 确保播放按钮显示为「暂停」状态

### 问题 3：缩放不生效

**可能原因**：
- 未聚焦在预览面板
- 快捷键冲突

**解决方法**：
1. 点击预览面板确保聚焦
2. 使用控制栏的缩放按钮
3. 检查其他应用是否占用快捷键

### 问题 4：快捷键不工作

**可能原因**：
- Eagle 版本过旧
- 快捷键被其他应用占用

**解决方法**：
1. 更新 Eagle 到最新版本
2. 关闭可能占用快捷键的应用
3. 使用控制栏按钮代替快捷键

### 问题 5：FPS 显示异常（0 或极低）

**可能原因**：
- 动画非常复杂
- 设备性能不足
- WebGL2 不支持

**解决方法**：
1. 检查浏览器是否支持 WebGL2
2. 尝试更新显卡驱动
3. 使用更简单的动画测试

## 📞 获取帮助

如果以上方法无法解决问题：

1. **查看文档**
   - [README.md](README.md) - 项目概览
   - [CHANGELOG.md](CHANGELOG.md) - 版本更新

2. **提交问题**
   - [GitHub Issues](https://github.com/yourusername/EagleRive/issues)
   - 描述问题时请提供：
     - Eagle 版本
     - 操作系统
     - Rive 文件（如果可以分享）
     - 错误截图

3. **联系作者**
   - GitHub: [@yourusername](https://github.com/yourusername)

---

祝你使用愉快！🎉
